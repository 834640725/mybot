首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
首页
下载APP
搜索
SpringBoot读取Resource下文件的几种方式

gigglesoso
SpringBoot读取Resource下文件的几种方式
2019.02.15 10:09:51
字数 396
阅读 12691
最近在项目中涉及到Excle的导入功能，通常是我们定义完模板供用户下载，用户按照模板填写完后上传；这里模板位置resource/excelTemplate/test.xlsx，尝试了四种读取方式，并且测试了四种读取方式分别的windows开发环境下(IDE中)读取和生产环境(linux下jar包运行读取)。
第一种：

ClassPathResource classPathResource = new ClassPathResource("excleTemplate/test.xlsx");
InputStream inputStream =classPathResource.getInputStream();
第二种：

InputStream inputStream = Thread.currentThread().getContextClassLoader().getResourceAsStream("excleTemplate/test.xlsx");
第三种：

InputStream inputStream = this.getClass().getResourceAsStream("/excleTemplate/test.xlsx");
第四种：

File file = ResourceUtils.getFile("classpath:excleTemplate/test.xlsx");
InputStream inputStream = new FileInputStream(file);
经测试：
前三种方法在开发环境(IDE中)和生产环境(linux部署成jar包)都可以读取到，第四种只有开发环境 时可以读取到，生产环境读取失败。
推测主要原因是springboot内置tomcat，打包后是一个jar包，因此通过文件读取获取流的方式行不通，因为无法直接读取压缩包中的文件，读取只能通过流的方式读取。
前三种都可以读取到其实殊途同归，直接查看底层代码都是通过类加载器读取文件流，类加载器可以读取jar包中的编译后的class文件，当然也是可以读取jar包中的文件流了。
用解压软件打开jar包查看结果如下：



其中cst文件中是编译后class文件存放位置，excleTemplate是模板存放位置，类加载器读取的是cst下class文件，同样可以读取excleTemplate下的模板的文件流了。

  
gigglesoso
拥有0.064钻
"小礼物走一走，来简书关注我"

写下你的评论...
全部评论
0
推荐阅读
更多精彩内容
Java 9 揭秘（4. 模块依赖）
文 by / 林本托 Tips做一个终身学习的人。 在此章节中，主要学习以下内容： 如何声明模块依赖 模块的隐式可...

码匠安徒生
热修复/插件化/组件化-Andfix/Tinker源码简单解读及相关知识剖析笔记
一、知识详解模块 1.dex/class深入讲解 2.jvm/dvm/art三个虚拟机的深入讲解 3.class ...

hanfengzqh
classloder
ClassLoader翻译过来就是类加载器，普通的java开发者其实用到的不多，但对于某些框架开发者来说却非常常见...

时待吾
JVM理解（上）：classloader加载class文件的原理和机制
1 JVM架构整体架构 在进入classloader分析之前，先了解一下jvm整体架构： JVM被分为三个主要的子...

安东尼_Anthony
记者同志，你的车马费掉了
杨杨在科技媒体实习了有一段时间了，终于得到允许独立去参加发布会。然后这个第一次出来工作、还没正式毕业的姑娘受到了点...

JudyJudy

gigglesoso
拥有0.064钻
一个将word转换为PDF的方法(复杂word格式不失真)
阅读 185
Springboot中跨域问题解决
阅读 80
精彩继续
400年前就该消失的垃圾，又被网红带火了
阅读 4812

错过420亿遗产，李嘉欣被嘲“豪门梦碎”，她嫁入豪门是输还是赢？
阅读 19769

写下你的评论...
